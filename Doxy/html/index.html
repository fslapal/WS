<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WS: WS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="favicon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WS
   </div>
   <div id="projectbrief">Arduino based weather station</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">WS </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>WS is a proof-of-concept student project. It was aimed at creating an indoor weather station based on Arduino that sends measured values to a web database.</p>
<h1>Components, wiring</h1>
<div class="image">
<img src="/Documentation/WS_diagram.png" alt="Wiring diagram"/>
</div>
<p> The complete scheme in Fritzing is available in the Documentation file.</p>
<h2>Components:</h2>
<ul>
<li>Arduino Mega 2560 R3 - microprocessor</li>
<li>ESP8266 - wifi module</li>
<li>BME280 - temperature, humidity and pressure senosr</li>
<li>RTC1307 - real time clock module (+ CR2025 battery)</li>
<li>Catalex MicroSD card reader (+ MicroSD card)</li>
<li>20x4 LCD display</li>
</ul>
<h2>Libraries:</h2>
<ul>
<li>cactus_io_BME280_I2C (BME, RTC)</li>
<li>DS1307RTC (RTC)</li>
<li>LiquidCrystal (LCD)</li>
<li>SD (SD module)</li>
<li>SPI (BME, SD module)</li>
<li>TimeLib (RTC)</li>
<li>Wire (I2C -&gt; BME, RTC)</li>
</ul>
<h1>Installation</h1>
<p>Code for the station was written and uploaded with help of Arduino IDE. Atom was used for the PHP server side programming. To start this station, there are needed a few steps to complete:</p><ol type="1">
<li>Establish hosting, database and web page.</li>
<li>Fill in the Server/variables.php with your right credentials.</li>
<li>Upload the content of Server folder on your hosting server.</li>
<li>Run mysql_connect.php to create table in the database.</li>
<li>Wire up the Arduino according to the wiring diagram included in this file.</li>
<li>Fill in all the constants in the Arduino file with server, wifi and other wished credentials.</li>
<li>Upload the sketch to Arduino and afterwards ensure the power supply is plugged in. It is good to provide the RTC with battery. In case of blackout, the right time will be sustained.</li>
<li>Adjust both potentiometers to fit your desired brightness and contrast levels.</li>
<li>Rejoice the beautiful statistics and graphs made from your data.</li>
</ol>
<h1>How does it work?</h1>
<p>By setting the interval in the Arduino file a cycle for recording data begins. Every x hours the internet connection is checked. If ESP is connected, the presence of WS.txt file is checked. Data from BME and RTC together with possible data from the SD card is transferred directly to the server. In case of a lost connection, data is stored on an SD card inserted into Catalex module. Both BME and RTC work via I2C interface. A communication between Arduino and ESP runs on the serial line. SD card module is connected via SPI. The LCD display renews data every x minutes. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
